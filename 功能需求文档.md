# 功能需求文档

**项目名称**：原神圣遗物工具(GenshinRelicTool)

**文档版本**：1.0

**日期**：2024年10月27日

## 1. 项目概述

GenshinRelicTool 是一个帮助玩家管理《原神》游戏中圣遗物的工具，通过模拟用户点击操作和图像识别，自动筛选和操作圣遗物，减少玩家的重复劳动。工具旨在提高玩家的游戏体验，让玩家可以更有效率地管理圣遗物。

## 2. 功能目标

1. **自动识别**：实时识别游戏界面中的圣遗物信息，包括稀有度、属性等。
2. **圣遗物管理**：根据玩家预设的规则，自动筛选出符合或不符合条件的圣遗物，并执行相应的解锁或锁定操作。
3. **用户操作模拟**：通过模拟鼠标点击，实现自动化的圣遗物操作，减少玩家手动操作的时间。

## 3. 功能模块

1. **图像识别模块**
   - 使用截图实时识别屏幕中出现的圣遗物。
   - 提取圣遗物的稀有度、属性信息，供后续判断使用。
   - 支持 OCR（光学字符识别），用以识别圣遗物中的文字信息。

2. **圣遗物管理模块**
   - 根据玩家设定的规则筛选圣遗物（如只保留特定属性的圣遗物）。
   - 实现批量的圣遗物解锁和锁定操作。
   - 记录每次操作的结果，如锁定/解锁的数量、时间等。

3. **用户操作模拟模块**
   - 模拟用户的鼠标点击、拖动操作，将识别结果转化为实际的点击行为。
   - 支持操作顺序的自定义（如先锁定，再解锁）。
   - 在界面上自动切换圣遗物页面，实现批量处理。

4. **配置管理模块**
   - 配置游戏窗口尺寸、图像识别参数（如匹配阈值）、点击间隔等。
   - 支持保存和加载不同的配置，满足不同用户的个性化需求。

5. **日志记录模块**
   - 记录每次运行的操作过程，包括识别结果、执行操作及出错信息。
   - 支持错误回溯，便于调试和分析问题。

## 4. 具体需求

| 功能模块     | 需求描述                              | 优先级 |
|----------|-----------------------------------|-----|
| 图像识别模块   | 能够每秒捕获并处理2-3张截图，识别圣遗物属性、稀有度等信息    | 高   |
|          | 支持基本的图像预处理，如灰度化、边缘检测，提高识别准确性      | 中   |
|          | 支持 OCR 功能，识别圣遗物中的文字信息，如属性、等级等     | 中   |
| 圣遗物管理模块  | 实现批量的解锁/锁定操作                      | 高   |
|          | 提供圣遗物筛选条件设置界面，供用户选择筛选条件           | 高   |
|          | 能够记录每次操作的状态，如锁定/解锁的圣遗物数量、识别到的属性信息 | 中   |
| 用户操作模拟模块 | 根据识别结果自动执行点击操作，完成圣遗物的锁定/解锁        | 高   |
|          | 支持在游戏界面上分页切换，批量处理圣遗物              | 中   |
|          | 操作过程流畅，点击频率可调节，防止误操作              | 中   |
| 配置管理模块   | 提供配置文件，便于调整游戏窗口尺寸、识别阈值、点击间隔等参数    | 高   |
|          | 支持保存和加载配置，适应不同玩家的偏好               | 低   |
| 日志记录模块   | 每次运行时记录所有的识别结果、操作记录及异常信息          | 中   |
|          | 支持输出日志文件，便于问题回溯和调试                | 低   |

## 5. 非功能性需求

- **性能**：工具应保持流畅的运行，识别频率和操作速度可调节，以适应不同计算机性能。
- **兼容性**：支持主流的操作系统（如Windows和macOS），确保跨平台运行。
- **稳定性**：在长时间运行中不会出现内存泄漏或程序崩溃。

## 6. 使用限制

- **合法性**：该工具不涉及修改或抓取游戏数据，仅通过模拟用户操作实现自动化管理，符合玩家使用规范。
- **资源占用**：确保在普通配置的计算机上不会因高频截图和图像处理而导致性能明显下降。

## 7. 风险与问题

- **误操作**：由于图像识别的可能误差，需设置较高地识别阈值，避免误解锁/误锁定。
- **资源消耗**：高频截图和图像处理会占用一定的CPU和内存资源，需合理控制识别频率。
